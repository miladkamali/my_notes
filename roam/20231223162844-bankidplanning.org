:PROPERTIES:
:ID:       D116CB6D-2821-47C7-AEE2-9F7A99CB7656
:END:
#+title: bankidPlanning
* Things in the current project
** Having multiple instances of liveness and facematching
*** TODO waiting for response on cloning the system
** deploy the current update to the production
*** TODO waiting on response on security issues
*** TODO Have to make a force update coordinated with hyerpetian
** customer support panel
*** TODO set up proper authentication schema user and password for login
*** TODO get the resources for deployment
*** TODO actual deployment
** call center panel
*** TODO fix the issues with endpoints
*** TODO create a proper login with
** 
* Things to implement in the new Version
** dockerize project
** shared disk solution
*** introduce minio as a 
* rewrite of the core
** preparation and service requirements
*** sms service
**** TODO [#A] kaveh negar [0/2]
***** TODO register business with kaveh negar                  :masoud:hamid:
***** TODO whitelist ip of the company and production                 :hamid:
**** TODO [#B] sms engine [0/2]
***** TODO gather the documentation of sms engine from code           :hamid:
***** TODO implement sms engine service                         :hamid:donya:
*** national registry information service
**** TODO sitad service
***** gather documentation of sitad service                     :hamid:milad:
***** 
**** TODO sat pay service
**** TODO sandbad service [0/3]
***** TODO create 
***** TODO get access to sandbad code
***** TODO integrate sandbad service
*** payment service
**** sep
**** ap service
***** 
** create business and flow and steps section
*** TODO list of pages and required data                        :donya:hamid:
*** TODO list of steps and association with data
*** TODO register hamoon business in the structure
** create business login and session
*** TODO create endpoint for business login
*** TODO create endpoint for session request
#+begin_src js
  {
      "businessId":"uuid", //required
      "flowId":"" //required
      "nationalId":"" ,//optional depending on the flow
      //...

  }
#+end_src


#+begin_src js
  {
      "sessionId":"string"
      "validUntil":"datetime"
  }
#+end_src
*** TODO create endpoint for otp request
*** TODO create session for otp verification














* 12 issues

** 1  payment issue
it should be fixed via hamoon corporation 
** 2 monitoring
*** DONE script based monitoring for logs
gives you response of each endpoint
*** TODO elastic based monitoring for logs
**** install elastic on monitoring server ( 2 month )
***** Create proper request for installation                         :faridi:
***** send email for installation                                :hami:hamid:
***** Follow up loop                                           :hamid:masoud:
**** aggregate logs in there
**** produce kibanna dashboard
*** TODO Monitoring of resources
**** install zabix on monitoring server
***** create proper request for installation                         :Faridi:
***** send email for installation                                     :hamid:
**** ask Mr Faridi to investigate zabbix integration
**** export necessary logs to zabbix
**** zabix( should be already integrated within the system )
*** TODO monitoring status of users
**** plan for panel integration
** 3 log issue
*** change hash to mask for national number and phone number 
**** develop patch
**** request update to production
** 4 HA for database
*** request machine for database replication for our data
*** request machine for database replication for video data
*** investigate solution for database HA
**** https://github.com/rudderlabs
** 5 explanation of database structure                                :hamid:
 - the main problem is that we don't even know it ourselves 

 - most of the database tables are not actually being utilized at the moment and that would be an embarrassing to admit it.

 - probably not include the tables that we are not using...
 - rough estimate is two weeks
** 6
*** create a rough plan for backup and how long they are going to be stored
uid backup (6,8,10,12,14,16,18,24)
- daily full backup(stored for 1 week)
- weekly back up for 4 weeks to be stored
** 7 will be changed by the next version
** 8
*** partitioning of video data
**** partitioning based on date
***** TODO create a document to describe this partitioning            :hamid:
*** partitioning of actual data
**** run the delete oauth and oauth_refresh script
***** TODO create a document to describe this script to run monthly
** 9 
*** finalize the document that is generated by Mr faridi              :hamid:
*** schedule the restart process
**** TODO coordinate with Operations and Hamid and Mr Faridi and a downtime 
** 10
we cant provide the document since we have no idea of the situation that will happen for users 
** 11
*** TODO schedule a visit to operation for clarifying the situation with each machine :faridi:hamid:
*** TODO create a document based on investigation results            :faridi:
*** TODO send the report                                              :hamid:
** 12
create a description of each machine and the responsibilities that they have
* monitoring
** set up ELK
*** DONE getting logs into elk
*** make sure we are actually storing logs as json
** user log
*** number of request/status for all the user endpoints
*** request/response time for all the endpoints
*** number of request/status for liveness and facematching endpoints
*** request/response time for liveness and facematching endpoints
*** number of request/status for National Registry endpoints
*** request/response time for National Registry endpoints
*** number of request/status for each endpoint
*** request/response time for each endpoint
*** number of Lid created
*** number of NationalId registry info 
*** number of payment initiation
*** number of payment success
*** number of users Authenticated
*** number of hamoon success calls
** service log
*** request/status for each service
*** request/response time for each service
