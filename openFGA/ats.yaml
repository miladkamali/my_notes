model
  schema 1.1

type user

type company
  relations
    define hr_expert: [user]
    define hr_deputy: [user]
    define supervision_expert: [user]
    define supervision_manager: [user]
    define committee_member: [user]
    define committee_secretary: [user]
    define committee_manager: [user]

    define parent:[company]
    define can_manage: hr_expert or hr_deputy or supervision_expert or supervision_manager or committee_member or committee_secretary or committee_manager
    define can_view: can_manage or can_view from parent
    define can_create_job_opportunity: hr_expert or hr_expert from parent

type position
  relations
    define company: [company]
    define root_company: [company]

type job_opportunity
  relations
    define requesting_department: [company]
    define position: [position]
    define root_company: [company]
    define hr_expert: hr_expert from requesting_department or hr_expert from root_company
    define hr_deputy: hr_deputy from requesting_department or hr_deputy from root_company
    define supervision_expert: supervision_expert from requesting_department or supervision_expert from root_company
    define supervision_manager: supervision_manager from requesting_department or supervision_manager from root_company
    define committee_member: committee_member from requesting_department or committee_member from root_company
    define committee_secretary: committee_secretary from requesting_department or committee_secretary from root_company
    define committee_manager: committee_manager from requesting_department or committee_manager from root_company

    define can_create: hr_expert
    define can_edit: hr_expert
    define can_disable: hr_expert
    define can_view: hr_expert or hr_deputy
    define can_create_jobseeker: hr_expert

type jobseeker
  relations
    define job_opportunity: [job_opportunity]
    define can_create_jobseeker: can_create_jobseeker from job_opportunity

    define can_view: can_create_jobseeker
    define can_create: can_create_jobseeker
    define can_edit: can_create_jobseeker
    define can_notify_interview: hr_expert from job_opportunity

type case
  relations
    define job_opportunity: [job_opportunity]
    define jobseeker: [jobseeker]
    define hr_expert: hr_expert from job_opportunity
    define hr_deputy: hr_deputy from job_opportunity
    define supervision_expert: supervision_expert from job_opportunity
    define supervision_manager: supervision_manager from job_opportunity
    define committee_member: committee_member from job_opportunity
    define committee_secretary: committee_secretary from job_opportunity
    define committee_manager: committee_manager from job_opportunity

    define can_view: hr_expert or hr_deputy or supervision_expert or supervision_manager or committee_member or committee_secretary or committee_manager
    define can_archive: hr_expert
    define can_unarchive: hr_expert
    define can_send_supervision: hr_expert
    define can_send_deputy: hr_expert
    define can_start_research: supervision_expert
    define can_refer_from_supervision: supervision_expert
    define can_comment: supervision_expert or supervision_manager or committee_secretary or committee_manager
    define can_approve_by_deputy: hr_deputy
    define can_refer_from_deputy: hr_deputy
    define can_feedback: committee_member
    define can_refer_from_committee: committee_secretary
    define can_reply_to_referrer_unit: hr_expert

type interview
relations
    define case: [case]
    define hr_expert: hr_expert from case
    define hr_deputy: hr_deputy from case
    define committee_member: committee_member from case
    define committee_secretary: committee_secretary from case
    define committee_manager: committee_manager from case

    define can_view: hr_expert or hr_deputy or committee_member or committee_secretary
    define can_create: committee_secretary
    define can_edit: committee_secretary

type report
  relations
    define hr_expert: [user]
    define hr_deputy: [user]
    define Supervision_expert: [user]
    define Supervision_manager: [user]
    define committee_member: [user]
    define committee_secretary: [user]
    define committee_manager: [user]

    define can_view_reports: hr_expert or hr_deputy or Supervision_expert or Supervision_manager or committee_member or committee_secretary or committee_manager
